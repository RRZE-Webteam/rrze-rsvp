{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://rrze-rsvp/./src/admin/script.js","webpack://rrze-rsvp/webpack/bootstrap","webpack://rrze-rsvp/webpack/runtime/compat get default export","webpack://rrze-rsvp/webpack/runtime/define property getters","webpack://rrze-rsvp/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["/**\n * RRZE-RSVP Plugin: Admin Dependencies\n */\n\"use strict\";\n\njQuery(document).ready(function ($) {\n    var DATE_FORMAT = rrze_rsvp_admin.dateformat,\n        TEXT_CANCEL = rrze_rsvp_admin.text_cancel,\n        TEXT_CANCELLED = rrze_rsvp_admin.text_cancelled,\n        TEXT_CONFIRMED = rrze_rsvp_admin.text_confirmed,\n        API_AJAXURL = rrze_rsvp_admin.ajaxurl;\n\n    function bookingAction(type, button) {\n        var id = button.attr(\"data-id\"),\n            href = button.attr(\"href\");\n\n        jQuery\n            .ajax({\n                type: \"POST\",\n                url: API_AJAXURL,\n                data: {\n                    action: \"booking_action\",\n                    id: id,\n                    type: type,\n                },\n            })\n            .fail(function (jqXHR) {\n                console.error(\"AJAX request failed\");\n            })\n            .done(function (data) {\n                data = JSON.parse(data);\n                jQuery\n                    .ajax({\n                        type: \"GET\",\n                        url: href,\n                    })\n                    .fail(function (jqXHR) {\n                        console.error(\"AJAX request failed\");\n                    })\n                    .done(function (data) {\n                        if (type == \"confirm\") {\n                            button\n                                .addClass(\"rrze-rsvp-confirmed\")\n                                .attr(\"disabled\", \"disabled\")\n                                .html(TEXT_CONFIRMED);\n                        } else {\n                            button\n                                .attr(\"disabled\", \"disabled\")\n                                .html(TEXT_CANCELLED);\n                        }\n                    });\n            });\n    }\n\n    $(\".rrze-rsvp-confirm\").click(function (e) {\n        e.preventDefault();\n        bookingAction(\"confirm\", jQuery(this));\n        return false;\n    });\n\n    $(\".rrze-rsvp-cancel\").click(function (e) {\n        e.preventDefault();\n        if (confirm(TEXT_CANCEL)) {\n            bookingAction(\"cancel\", jQuery(this));\n        }\n        return false;\n    });\n\n    /*\n     * CPT Booking Backend\n     */\n\n    // Set search string in result\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get(\"s\")) {\n        $(\".subtitle\").html(\n            $(\".subtitle\")\n                .text()\n                .substring(0, $(\".subtitle\").text().length - 1) +\n                ' \"' +\n                urlParams.get(\"s\") +\n                '\"'\n        );\n    }\n\n    // Hide booking mode info text on loading, insert booking mode info icon\n    $(\"select#rrze-rsvp-room-bookingmode\").after(\n        '<a><span class=\"dashicons dashicons-editor-help info-bookingmode\" title=\"Informationen zum Buchungsmodus anzeigen\" aria-hidden=\"true\"></span><span class=\"screen-reader-text\">Informationen zum Buchungsmodus anzeigen</span></a>'\n    );\n    $(\".cmb2-id-rrze-rsvp-room-bookingmode .cmb2-metabox-description\").hide();\n    $(\".cmb2-id-rrze-rsvp-room-bookingmode\")\n        .find(\".info-bookingmode\")\n        .click(function () {\n            $(\n                \".cmb2-id-rrze-rsvp-room-bookingmode .cmb2-metabox-description\"\n            ).slideToggle();\n        });\n\n    // CPT Room: Set timeslot remove buttons to disabled if timeslot bookings for this timeslot exist\n    var timeslotgroup = $(\n        \"body.wp-admin.post-type-room #rrze-rsvp-room-timeslots_repeat div.cmb-repeatable-grouping\"\n    );\n    $(timeslotgroup).each(function (index) {\n        // console.log($(this).find(\"input[id$='rrze-rsvp-room-starttime']\").prop('disabled'));\n        if (\n            $(this)\n                .find(\"input[id$='rrze-rsvp-room-starttime']\")\n                .prop(\"disabled\") == true\n        ) {\n            $(this).find(\"button.cmb-remove-group-row\").prop({\n                disabled: true,\n            });\n        }\n    });\n\n    // Remove disabled attribute from protected timeslot fields before submit\n    $(\n        \"body.wp-admin.post-type-room form, body.wp-admin.post-type-booking form\"\n    ).submit(function (e) {\n        $(\"#postbox-container-2 :disabled\").each(function (e) {\n            $(this).removeAttr(\"disabled\");\n        });\n    });\n\n    // Fill date/time inputs with timeslot selector\n    var details = jQuery(\"div#rrze-rsvp-booking-details\"),\n        seat = details.find(\"select#rrze-rsvp-booking-seat\"),\n        startdate = details.find(\"input#rrze-rsvp-booking-start_date\"),\n        starttime = details.find(\"input#rrze-rsvp-booking-start_time\"),\n        enddate = details.find(\"input#rrze-rsvp-booking-end_date\"),\n        endtime = details.find(\"input#rrze-rsvp-booking-end_time\");\n\n    starttime.attr(\"disabled\", \"disabled\");\n\n    seat.change(function () {\n        startdate.val(\"\");\n        starttime.val(\"\");\n        enddate.val(\"\");\n        endtime.val(\"\");\n        jQuery(\"div.select_timeslot_container\").remove();\n    });\n\n    startdate.change(function () {\n        enddate.val(startdate.val());\n        starttime.val(\"\");\n        endtime.val(\"\");\n        if (seat.val() == \"\" || startdate.val() == \"\") {\n            alert(rrze_rsvp_admin.alert_no_seat_date);\n            startdate.val(\"\");\n            enddate.val(\"\");\n        } else {\n            jQuery(\"div.select_timeslot_container\").remove();\n            jQuery.post(\n                API_AJAXURL,\n                {\n                    //POST request\n                    action: \"ShowTimeslots\", //action\n                    seat: seat.val(), //data\n                    date: startdate.val(), //data\n                },\n                function (result) {\n                    //callback\n                    // console.log(result);\n                    if (result != false) {\n                        jQuery(\"input#rrze-rsvp-booking-start_time\").after(\n                            result\n                        );\n                    }\n                }\n            );\n        }\n    });\n\n    $(\"div.cmb2-id-rrze-rsvp-booking-start\").on(\n        \"change\",\n        \"select.select_timeslot\",\n        function () {\n            var select_start = jQuery(this).val();\n            var select_end = jQuery(this).find(\":selected\").data(\"end\");\n            //console.log(select_start);\n            //console.log(select_end);\n            starttime.val(select_start);\n            endtime.val(select_end);\n        }\n    );\n\n    /* trigger reservations' details - see https://github.com/RRZE-Webteam/rrze-rsvp/issues/92 */\n    var bookingModeSelect = $(\"select#rrze-rsvp-room-bookingmode\");\n    var bookingMode = bookingModeSelect.val();\n    var instantCheckInRow = $(\"div.cmb2-id-rrze-rsvp-room-instant-check-in\");\n    var autoConfirmationInput = $(\"input#rrze-rsvp-room-auto-confirmation\");\n    var autoConfirmationChecked = autoConfirmationInput.is(\":checked\");\n    var forceConfirmationInput = $(\"input#rrze-rsvp-room-force-to-checkin\");\n    triggerModeVisibility(bookingMode);\n    triggerInstant(autoConfirmationChecked);\n    triggerCheckInTime();\n\n    bookingModeSelect.on(\"change\", function () {\n        var bookingMode = $(\"option:selected\", this).val();\n        triggerModeVisibility(bookingMode);\n        triggerCheckInTime();\n    });\n    autoConfirmationInput.click(function () {\n        var autoConfirmationChecked = $(this).is(\":checked\");\n        triggerInstant(autoConfirmationChecked);\n    });\n    forceConfirmationInput.click(function () {\n        triggerCheckInTime();\n    });\n\n    function triggerModeVisibility(bookingMode) {\n        $(\n            \"div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row.hide-\" +\n                bookingMode\n        ).slideUp();\n        $(\"div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row\")\n            .not(\".hide-\" + bookingMode)\n            .slideDown();\n        $(\n            \"div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row.hide-\" +\n                bookingMode +\n                \" input\"\n        ).prop(\"checked\", false);\n        if (bookingMode === \"check-only\") {\n            $(\"input#rrze-rsvp-room-instant-check-in\").prop(\"checked\", true);\n            $(\"input#rrze-rsvp-room-auto-confirmation\").prop(\"checked\", true);\n        }\n    }\n\n    function triggerInstant(autoConfirmationChecked) {\n        if (autoConfirmationChecked === true) {\n            var bookingMode = $(\"option:selected\", bookingModeSelect).val();\n            if (bookingMode === \"reservation\" || bookingMode === \"check-only\") {\n                instantCheckInRow.slideDown();\n            }\n        } else {\n            instantCheckInRow.slideUp();\n            $(\"#rrze-rsvp-room-instant-check-in\").prop(\"checked\", false);\n        }\n    }\n\n    function triggerCheckInTime() {\n        if ($(\"input#rrze-rsvp-room-force-to-checkin\").is(\":checked\")) {\n            $(\"div.cmb2-id-rrze-rsvp-room-check-in-time\").slideDown();\n        } else {\n            $(\"div.cmb2-id-rrze-rsvp-room-check-in-time\").slideUp();\n        }\n    }\n\n    // prevent copy & paste and disable mouse right click and cut for booking overview\n    $(\"body.post-type-booking table.wp-list-table\").bind(\n        \"cut copy paste\",\n        function (e) {\n            e.preventDefault();\n        }\n    );\n    $(\"body.post-type-booking table.wp-list-table\").on(\n        \"contextmenu\",\n        function (e) {\n            return false;\n        }\n    );\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["jQuery","document","ready","$","rrze_rsvp_admin","dateformat","TEXT_CANCEL","text_cancel","TEXT_CANCELLED","text_cancelled","TEXT_CONFIRMED","text_confirmed","API_AJAXURL","ajaxurl","bookingAction","type","button","id","attr","href","ajax","url","data","action","fail","jqXHR","console","error","done","JSON","parse","addClass","html","click","e","preventDefault","this","confirm","urlParams","URLSearchParams","window","location","search","get","text","substring","length","after","hide","find","slideToggle","timeslotgroup","each","index","prop","disabled","submit","removeAttr","details","seat","startdate","starttime","enddate","endtime","change","val","remove","alert","alert_no_seat_date","post","date","result","on","select_start","select_end","bookingModeSelect","bookingMode","instantCheckInRow","autoConfirmationInput","autoConfirmationChecked","is","forceConfirmationInput","triggerModeVisibility","slideUp","not","slideDown","triggerInstant","triggerCheckInTime","bind","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","obj","prototype","hasOwnProperty","call"],"sourceRoot":""}